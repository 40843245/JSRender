# $.views.viewModels method
## API
### intro
The `$.views.viewModels` method will create a view model.

### parameter
+ getter: should be an an array of string (or can be evaluated to string) which defines an array of `getter-setter` methods in the view model.

Each element defines a `getter-setter` method whose name is the element itself. 

> [!NOTE]
> a `getter-setter` method behaves similarly as a `getter-setter` property,
>
> but when you want to access the value of the `getter-setter` method, you can invoke it (such as `person.price()`)
>
> To access value `getter-setter` property, you can use it directly (such as `person.name`);

+ extend: should be a map which defines all methods in the view model. In each key-value pair,

the key should be a string (or can be evaluated to string) which declares a method name.

, while the value should be a anomyous function which defines the method.

### returned
It will return a object as a view model.

## instantiate an object with a view model
Simply invoke the view model as a function and passed the arguments for initial value of `getter-setter` methods respectively.

> [!WARNING]
> I don't say instantiate it as a class since we can't use `new` keyword before a view model.
>
> For example,
>
> we can't use
> 
> `var nico = new Person("Nico","3.50");` (where `Person` is a view model created by `$.views.viewModels` method call)
>
> we should use
> 
> `var nico = Person("Nico","3.50");`
>
> The reason why it is `$.views.viewModels` create a view model with factory method that will instantiate an object with `new` internally.
>
> For more details, see [Notes on Creating View Model instances, using the View Model constructor section in `$.views.viewModels` (JsRender Docs)](https://www.jsviews.com/#viewmodelsapi@construct)

## examples
### wrong examples
#### wrong example 1

```
<!DOCTYPE html5>
<!-- To run the current sample code in your own environment, copy this to an html page. -->

<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://www.jsviews.com/download/jsviews.min.js"></script>
  <script src="https://www.jsviews.com/download/plugins/jsrender-unicode.min.js"></script>
  <link href="https://www.jsviews.com/samples/samples.css" rel="stylesheet" />
</head>
<body>

<script id="myTmpl" type="text/x-jsrender">
</script>

<div id="page"></div>

<script>

function printPrice(book){
  console.log('The book is at '+ book.price +' price.');
}

var Book = $.views.viewModels({   // Compile a Book View Model
  getters: ["title", "price"],    // getters array - signature of constructor
});

var Person = $.views.viewModels({ // Compile a Person View Model
  getters: ["name","money"],      // getters array - signature of constructor
  extend: {                       // extend object - additional methods 
      purchase: function(other) {
        if(this.money <= other.price)
        {
          throw new Error("Transaction failed. Not enoguh money.");
        }

        this.buy(other);
        return;
      },
      buy: function(other){
        this.money -= other.price;
        console.log('Transcation successful. ' + this.name + ' has purchased a book -- ' + other.title);
        this.printMoney();
      },
      printMoney:function(){
        console.log('The person ' + this.name + ' has ' + this.money + ' money now.');
      }
  }
});

let nico = Person("Nico","3.50");

nico.printMoney();

let book1 = Book("學好日語的秘訣", "1.50"); // Construct a Book View Model instance

printPrice(book1);

nico.buy(book1);

book1.price("2.50");               // Modify price

printPrice(book1);

nico.buy(book1);
</script>

</body>
</html>
```

The above code will produce unexpected output on the console of developement tool in webbrowser. 

For more information, see the Gemini answers in this article [Why access viewmodel.name directly will get viewmodel.name function info not print the value of viewmodel.name?.md](https://github.com/40843245/JSRender/blob/main/Q&A/Why%20access%20viewmodel.name%20directly%20will%20get%20viewmodel.name%20function%20info%20not%20print%20the%20value%20of%20viewmodel.name%3F.md)
### fixed examples
#### fixed example 1

The above code in wrong example 1 section can be fixed as following code (modified by Google Gemini).

```
<!DOCTYPE html5>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://www.jsviews.com/download/jsviews.min.js"></script>
  <script src="https://www.jsviews.com/download/plugins/jsrender-unicode.min.js"></script>
  <link href="https://www.jsviews.com/samples/samples.css" rel="stylesheet" />
</head>
<body>

<script id="myTmpl" type="text/x-jsrender">
</script>

<div id="page"></div>

<script>

function printPrice(book){
  console.log('The book is at '+ book.price +' price.');
}

var Book = $.views.viewModels({
  getters: ["title", "price"],
});

var Person = $.views.viewModels({
  getters: ["name","money"],
  extend: {
    purchase: function(other) {
      if(this.money <= other.price)
      {
        throw new Error("Transaction failed. Not enoguh money.");
      }

      this.buy(other);
      return;
    },
    buy: function(other){
      this.money -= other.price;
      console.log('Transcation successful. ' + this.name + ' has purchased a book -- ' + other.title);
      this.printMoney();
    },
    printMoney:function(){
      console.log('The person ' + this.name + ' has ' + this.money + ' money now.');
    }
  }
});

let nico = Person("Nico", 3.50); // money is now a number.

nico.printMoney();

let book1 = Book("學好日語的秘訣", 1.50); // price is now a number.

printPrice(book1);

nico.buy(book1);

book1.price = 2.50; // Modify price

printPrice(book1);

nico.buy(book1);
</script>

</body>
</html>
```
